---
layout: section
title: Gotcha 1
---
<div id="example" class="sections">
	<h2>Example</h2>
	<p>We wanted to create add/remove items in a cart functionality. Each operation will create an ajax call and upon completion update the state of the button</p>
	<textarea id="html">
<div class="row-fluid" id="plan1">
	<div class="span10">
		<img src="http://placehold.it/1000X50"></img>
	</div>
	<div class="span2">
		<div id="buttons-panel">
			<input type="button" value="Add to cart" class="addToCart btn" id="add_1"/>
			<input type="button" value="Remove From cart" class="removeFromCart btn" style="display:none;" id="remove_1"/>
		</div>
	</div>
</div>
<div class="row-fluid" id="plan2">
	<div class="span10">
		<img src="http://placehold.it/1000X50"></img>
	</div>
	<div class="span2">
		<div id="buttons-panel">
			<input type="button" value="Add to cart" class="addToCart btn" id="add_2"/>
			<input type="button" value="Remove From cart" class="removeFromCart btn" style="display:none;" id="remove_2"/>
		</div>
	</div>
</div>
	</textarea>
</div>
<div id="code" class="sections">
	<h2>Code</h2>
	<button class="btn btn-primary .pull-right" id="runCode">Run</button>
	<div class="clearfix"></div>
	<p>We attached click event handlers to the buttons. Following is the javascript code:</p>
	<textarea id="javascript">
	$(".addToCart").click(function(){
		var othis = $(this),
		planId = this.id.split("_")[1];
		removeButton = othis.next();
		$.ajax({
			url : "/addPlan/"+planId,
			success: function(){
				othis.hide();
				removeButton.show();
			}
		});
	});
	$(".removeFromCart").click(function(){
		var othis = $(this),
		planId = this.id.split("_")[1];
		addButton = othis.prev();
		$.ajax({
			url : "/removePlan/"+planId,
			success: function(){
				othis.hide();
				addButton.show();
			}
		});
	});
	</textarea>
	<div id="preview" style="display:none;"></div>
</div>
<div id="explain" class="sections">
	<h2>Explain</h2>
	<p>We have a global pollution here.</p>
</div>